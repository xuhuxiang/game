{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/utils/request\";\nexport default {\n  data() {\n    let goodsId = this.$route.query.id;\n    return {\n      user: JSON.parse(localStorage.getItem(\"user\") || {}),\n      cartData: [],\n      goods: {},\n      goodsId: goodsId,\n      dialogVisible: false,\n      addressId: null\n    };\n  },\n  mounted() {\n    this.load();\n  },\n  // methods：本页面所有的点击事件或者其他函数定义区\n  methods: {\n    load() {\n      request.get(\"/cart\").then(res => {\n        if (res.code === '0') {\n          this.cartData = res.data;\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    del(id) {\n      request.delete(\"/cart/\" + id).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    // buy() {\n    //   this.dialogVisible = true;\n    // },\n    save() {\n      if (this.cartData.length === 0) {\n        this.$notify.warning(\"您的购物车空空如也\");\n        return;\n      }\n      // if (!this.addressId) {\n      //   this.$notify.warning(\"请选择收货地址,如没有地址，请到地址管理设置地址\")\n      //   return\n      // }\n      // let data = {list: this.cartData, addressId: this.addressId}\n      let data = {\n        list: this.cartData\n      };\n      request.post(\"/order/buy\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"购买成功\");\n          this.$router.push(\"/front/order\");\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","data","goodsId","$route","query","id","user","JSON","parse","localStorage","getItem","cartData","goods","dialogVisible","addressId","mounted","load","methods","get","then","res","code","$notify","error","msg","del","delete","success","save","length","warning","list","post","$router","push"],"sources":["src/views/front/Cart.vue"],"sourcesContent":["<template>\n  <div class=\"main-content1\">\n    <div style=\"margin-top: 40px;padding: 0 260px\">\n      <div class=\"main-table-box\">\n        <div style=\"height: 50px; line-height: 50px; font-weight: bold; font-size: 20px;margin-bottom: 40px\">我的购物车</div>\n        <el-table style=\"width: 100%\" :data=\"cartData\" size=\"small\" strip header-cell-class-name=\"tableHeaderClass\" >\n          <el-table-column label=\"商品\" width=\"100px\">\n            <template v-slot=\"scope\">\n              <el-image :src=\"scope.row.img\" :preview-src-list=\"[scope.row.img]\" style=\"width: 50px; height: 50px; border-radius: 50%\"></el-image>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"商品名称\" prop=\"goodsName\" width=\"400px\"></el-table-column>\n          <el-table-column label=\"价格\" prop=\"price\"></el-table-column>\n          <el-table-column label=\"操作\" fixed=\"right\">\n            <template v-slot=\"scope\">\n              <el-popconfirm title=\"确定删除吗？\" @confirm=\"del(scope.row.id)\">\n                <el-button size=\"small\" type=\"danger\" slot=\"reference\">删除</el-button>\n              </el-popconfirm>\n            </template>\n          </el-table-column>\n        </el-table>\n        <div style=\"margin-top: 100px; text-align: right; padding: 20px 60px\">\n          <div class=\"detail-fields-item overflowShow\" style=\"margin-top: 20px\">\n            <template>\n              <el-popconfirm title=\"确定支付吗？\" @confirm=\"save\">\n                <el-button size=\"big\" type=\"danger\" slot=\"reference\" >支付</el-button>\n              </el-popconfirm>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n\n  data() {\n    let goodsId = this.$route.query.id\n    return {\n      user: JSON.parse(localStorage.getItem(\"user\") || {}),\n      cartData: [],\n      goods: {},\n      goodsId: goodsId,\n      dialogVisible: false,\n      addressId: null,\n    }\n  },\n  mounted() {\n    this.load()\n  },\n  // methods：本页面所有的点击事件或者其他函数定义区\n  methods: {\n    load() {\n      request.get(\"/cart\").then(res => {\n        if (res.code === '0') {\n          this.cartData = res.data\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    del(id) {\n      request.delete(\"/cart/\" + id).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"删除成功\")\n          this.load()\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    // buy() {\n    //   this.dialogVisible = true;\n    // },\n    save() {\n      if (this.cartData.length === 0) {\n        this.$notify.warning(\"您的购物车空空如也\")\n        return\n      }\n      // if (!this.addressId) {\n      //   this.$notify.warning(\"请选择收货地址,如没有地址，请到地址管理设置地址\")\n      //   return\n      // }\n      // let data = {list: this.cartData, addressId: this.addressId}\n      let data = {list: this.cartData}\n      request.post(\"/order/buy\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"购买成功\")\n          this.$router.push(\"/front/order\")\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    }\n  }\n}\n</script>\n"],"mappings":";AAqCA,OAAAA,OAAA;AAEA;EAEAC,KAAA;IACA,IAAAC,OAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,EAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAV,OAAA,EAAAA,OAAA;MACAW,aAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACA;EACAC,OAAA;IACAD,KAAA;MACAhB,OAAA,CAAAkB,GAAA,UAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAV,QAAA,GAAAS,GAAA,CAAAnB,IAAA;QACA;UACA,KAAAqB,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAC,IAAApB,EAAA;MACAL,OAAA,CAAA0B,MAAA,YAAArB,EAAA,EAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAK,OAAA;UACA,KAAAX,IAAA;QACA;UACA,KAAAM,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACA;IACA;IACA;IACAI,KAAA;MACA,SAAAjB,QAAA,CAAAkB,MAAA;QACA,KAAAP,OAAA,CAAAQ,OAAA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAA7B,IAAA;QAAA8B,IAAA,OAAApB;MAAA;MACAX,OAAA,CAAAgC,IAAA,eAAA/B,IAAA,EAAAkB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAK,OAAA;UACA,KAAAM,OAAA,CAAAC,IAAA;QACA;UACA,KAAAZ,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}