{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem(\"user\") || {}),\n      orderData: [],\n      content: '',\n      goodsId: '',\n      dialogVisible: false\n    };\n  },\n  mounted() {\n    this.load();\n  },\n  // methods：本页面所有的点击事件或者其他函数定义区\n  methods: {\n    load() {\n      request.get(\"/order\").then(res => {\n        if (res.code === '0') {\n          this.orderData = res.data;\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    del(id) {\n      request.delete(\"/order/\" + id).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    updateStatus(data, status) {\n      data.status = status;\n      request.put(\"/order\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"操作成功\");\n          this.load();\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    openDialog(goodsId) {\n      this.goodsId = goodsId;\n      this.dialogVisible = true;\n    },\n    save() {\n      if (!this.content) {\n        this.$notify.warning(\"请输入内容\");\n      }\n      let data = {\n        content: this.content,\n        userId: this.user.id,\n        role: this.user.role,\n        parentId: 0,\n        relId: this.goodsId\n      };\n      request.post(\"/comment\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"评价成功\");\n          this.dialogVisible = false;\n          this.content = \"\";\n          this.goodsId = \"\";\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","data","user","JSON","parse","localStorage","getItem","orderData","content","goodsId","dialogVisible","mounted","load","methods","get","then","res","code","$notify","error","msg","del","id","delete","success","updateStatus","status","put","openDialog","save","warning","userId","role","parentId","relId","post"],"sources":["src/views/front/Order.vue"],"sourcesContent":["<template>\n  <div class=\"main-content1\">\n    <div  style=\"margin-top: 40px;padding: 0 260px\">\n      <div class=\"main-table-box\">\n        <div style=\"height: 50px; line-height: 50px; font-weight: bold; font-size: 20px;margin-bottom: 40px\">我的订单</div>\n        <el-table style=\"width: 100%\" :data=\"orderData\" size=\"small\" strip header-cell-class-name=\"tableHeaderClass\" >\n          <el-table-column label=\"商品\" width=\"460px\">\n            <template v-slot=\"scope\">\n              <div style=\"display: flex; align-items: center; margin-bottom: 5px\">\n                <el-image :src=\"scope.row.goods.img\" :preview-src-list=\"[scope.row.goods.img]\" style=\"width: 40px; height: 40px; border-radius: 50%\"></el-image>\n<!--                <div style=\"flex: 1; font-size: 14px; margin-left: 10px\">{{scope.row.goods.name}} x {{scope.row.num}}</div>-->\n                <div style=\"flex: 1; font-size: 14px; margin-left: 10px\">{{scope.row.goods.name}}</div>\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"订单编号\" prop=\"orderId\" width=\"150px\"></el-table-column>\n          <el-table-column label=\"下单人\" prop=\"userName\"></el-table-column>\n          <el-table-column label=\"下单时间\" prop=\"time\" width=\"150px\"></el-table-column>\n          <el-table-column label=\"订单价格\" prop=\"price\"></el-table-column>\n          <el-table-column label=\"联系方式\" prop=\"phone\" width=\"100px\"></el-table-column>\n          <el-table-column label=\"订单状态\" prop=\"status\"></el-table-column>\n          <el-table-column label=\"操作\" fixed=\"right\" width=\"250\">\n            <template v-slot=\"scope\">\n              <el-button type=\"primary\" v-if=\"scope.row.status === '已发货'\" @click=\"updateStatus(scope.row, '已完成')\" style=\"margin-right: 5px\">确认收货</el-button>\n              <el-button type=\"primary\" v-if=\"scope.row.status === '已完成'\" @click=\"updateStatus(scope.row, '退款申请中')\" style=\"margin-right: 5px\">退款</el-button>\n              <el-button type=\"primary\" v-if=\"scope.row.status === '已完成'\" @click=\"openDialog(scope.row.goodsId)\" style=\"margin-right: 5px\">评价</el-button>\n              <el-popconfirm title=\"确定删除吗？\" @confirm=\"del(scope.row.id)\">\n                <el-button size=\"small\" type=\"danger\" slot=\"reference\">删除</el-button>\n              </el-popconfirm>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </div>\n    <el-dialog title=\"请填写评价信息\" :visible.sync=\"dialogVisible\" width=\"40%\">\n      <el-form label-position=\"right\" label-width=\"100px\" style=\"padding-right: 40px\">\n        <el-form-item label=\"评价内容\">\n          <el-input size=\"small\" type=\"textarea\" v-model=\"content\" placeholder=\"请输入评价内容\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button size=\"small\" type=\"primary\" @click=\"save\">保 存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem(\"user\") || {}),\n      orderData: [],\n      content: '',\n      goodsId: '',\n      dialogVisible: false,\n    }\n  },\n  mounted() {\n    this.load()\n  },\n  // methods：本页面所有的点击事件或者其他函数定义区\n  methods: {\n    load() {\n      request.get(\"/order\").then(res => {\n        if (res.code === '0') {\n          this.orderData = res.data\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    del(id) {\n      request.delete(\"/order/\" + id).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"删除成功\")\n          this.load()\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    updateStatus(data, status) {\n      data.status = status\n      request.put(\"/order\", data).then(res => {\n        if (res.code === '0') {\n          this.$notify.success(\"操作成功\")\n          this.load()\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    },\n    openDialog(goodsId) {\n      this.goodsId = goodsId\n      this.dialogVisible = true;\n    },\n    save() {\n      if (!this.content) {\n        this.$notify.warning(\"请输入内容\")\n      }\n      let data = {content: this.content, userId: this.user.id, role: this.user.role, parentId: 0, relId: this.goodsId}\n      request.post(\"/comment\", data).then(res => {\n        if (res.code ==='0') {\n          this.$notify.success(\"评价成功\")\n          this.dialogVisible = false\n          this.content = \"\"\n          this.goodsId = \"\"\n        } else {\n          this.$notify.error(res.msg)\n        }\n      })\n    }\n  }\n}\n</script>\n"],"mappings":"AAiDA,OAAAA,OAAA;AAEA;EAEAC,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,SAAA;MACAC,OAAA;MACAC,OAAA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACA;EACAC,OAAA;IACAD,KAAA;MACAZ,OAAA,CAAAc,GAAA,WAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAV,SAAA,GAAAS,GAAA,CAAAf,IAAA;QACA;UACA,KAAAiB,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAC,IAAAC,EAAA;MACAtB,OAAA,CAAAuB,MAAA,aAAAD,EAAA,EAAAP,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAM,OAAA;UACA,KAAAZ,IAAA;QACA;UACA,KAAAM,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAK,aAAAxB,IAAA,EAAAyB,MAAA;MACAzB,IAAA,CAAAyB,MAAA,GAAAA,MAAA;MACA1B,OAAA,CAAA2B,GAAA,WAAA1B,IAAA,EAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAM,OAAA;UACA,KAAAZ,IAAA;QACA;UACA,KAAAM,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;IACAQ,WAAAnB,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;MACA,KAAAC,aAAA;IACA;IACAmB,KAAA;MACA,UAAArB,OAAA;QACA,KAAAU,OAAA,CAAAY,OAAA;MACA;MACA,IAAA7B,IAAA;QAAAO,OAAA,OAAAA,OAAA;QAAAuB,MAAA,OAAA7B,IAAA,CAAAoB,EAAA;QAAAU,IAAA,OAAA9B,IAAA,CAAA8B,IAAA;QAAAC,QAAA;QAAAC,KAAA,OAAAzB;MAAA;MACAT,OAAA,CAAAmC,IAAA,aAAAlC,IAAA,EAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,OAAA,CAAAM,OAAA;UACA,KAAAd,aAAA;UACA,KAAAF,OAAA;UACA,KAAAC,OAAA;QACA;UACA,KAAAS,OAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}